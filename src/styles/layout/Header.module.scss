/* placeholder to avoid missing import if not existing */
@import '../animations.scss';
@import '../mixins.scss';
@import '../globals.scss';

@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');

$height: 55px;
$header-border-radius: 30px;

.header {
  font-family: 'Montserrat' !important;
  position: fixed;
  z-index: 10;
  top: 20px; // Position below the top edge
  left: 50%;
  transform: translateX(-50%);
  width: 80%; // Adjust width as needed
  max-width: 1400px; // Max width for large screens
  margin-top: 20px; // Add top margin
  transition: box-shadow $transition-s $transition-ease; // Only transition shadow now
  background-color: rgba(255, 255, 255, 0.8); // Semi-transparent background ALWAYS
  backdrop-filter: blur(10px);
  height: auto;
  border-radius: $header-border-radius; // Rounded ALWAYS
  box-shadow: 
    0 0 15px rgba(0, 55, 192, 0.6),
    0 0 25px rgba(0, 55, 192, 0.5),
    0 0 35px rgba(0, 55, 192, 0.4),
    0 4px 15px rgba(0, 0, 0, 0.05); // Harder, more solid blue glow with less dispersion

  .fix {
    @include flex-row;
    justify-content: space-between;
    padding: 5px 15px; // Adjust padding inside the header
    margin: auto;
    align-items: center;
    min-height: 60px; // Ensure minimum height
  }

  // New container for Logo + Nav links
  .leftSideContainer {
    display: flex;
    align-items: center;
    gap: 30px; // Gap between logo and nav links
  }

  .logoWrapper {
    display: flex;
    align-items: center;
    text-decoration: none;
    // Removed padding-left, handled by leftSideContainer gap

    .logo {
      margin-right: 15px;
      height: 45px; // Shrunk from default
      width: auto;
      flex-shrink: 0; // Prevent logo from shrinking
    }

    .textWrapper {
      display: flex;
      flex-direction: column;
      color: #333;
      line-height: 1.3;

      .mainText {
        font-size: 0.9rem;
        font-weight: 600;
        white-space: nowrap;
      }

      .subText {
        font-size: 0.9rem;
        font-weight: 500;
        margin-top: 0px;
        white-space: nowrap;
      }
    }
  }

  // Navigation bar itself (inside leftSideContainer on desktop)
  .navbar {
    @include flex-row;
    gap: 60px; // Increased spacing between nav buttons
    align-items: center;
    margin: 0;
    margin-left: 50px; // Move buttons to the right while keeping logo in place
  }

  // Container for the right-side elements (Apply button)
  .rightSideContainer {
    display: flex;
    align-items: center;
    gap: 10px;
    background-color: transparent;
    border-radius: 100px;
    padding-right: 0px;
  }

  .applyButton {
    background-color: #fff;
    color: #000;
    font-family: 'Bionix';
    padding: 3px 20px;
    border-radius: 20px;
    text-decoration: none;
    font-size: 1.5rem;
    font-weight: 600;
    border: 2px solid rgba(0, 55, 192, 0.3);
    cursor: pointer;
    box-shadow: 
      0 0 0 1px rgba(0, 55, 192, 0.4),
      0 0 10px rgba(0, 55, 192, 0.3),
      0 0 20px rgba(0, 55, 192, 0.2);
    transition: 
      background-color 0.3s ease,
      border-color 0.3s ease,
      box-shadow 0.3s ease;
    white-space: nowrap;

    &:hover {
      background-color: #fff;
      border-color: rgba(0, 55, 192, 0.5);
      box-shadow: 
        0 0 0 1px rgba(0, 55, 192, 0.5),
        0 0 15px rgba(0, 55, 192, 0.4),
        0 0 30px rgba(0, 55, 192, 0.3);
    }
  }
}

// Styles for the sticky header state - ONLY add shadow, keep other styles the same
.header.stick {
  box-shadow: 
    0 0 15px rgba(0, 55, 192, 0.6),
    0 0 25px rgba(0, 55, 192, 0.5),
    0 0 35px rgba(0, 55, 192, 0.4),
    0 6px 20px rgba(0, 0, 0, 0.1); // Harder, more solid blue glow with less dispersion when sticky
  // REMOVED: top, width, background-color, border-radius changes
}

// Hamburger button for mobile
.hamburgerButton {
  color: #0037c0;
  // Ensure it's properly positioned on the right when menu is hidden
  margin-left: auto;
}

// Mobile Drawer Styles - ENHANCED
.drawerPaper {
  width: 320px !important; // Partial width instead of full screen
  max-width: 85vw !important; // Max 85% of viewport width
  background-color: rgba(255, 255, 255, 0.98); // Semi-transparent background
  backdrop-filter: blur(10px); // Blur effect like desktop header
  box-shadow: -5px 0 20px rgba(0, 0, 0, 0.15); // Add shadow for depth
  border-radius: 0 0 0 15px; // Rounded bottom-left corner
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important; // Smooth slide animation
  will-change: transform; // Optimize animation performance
}

// Global MUI Drawer styles for smooth animation
:global(.MuiDrawer-root) {
  .MuiBackdrop-root {
    background-color: rgba(0, 0, 0, 0.3) !important;
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }
  
  .MuiPaper-root {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }
}

.drawerContent {
  padding: 2rem 1.5rem; // More padding for better spacing
  display: flex;
  flex-direction: column;
  gap: 1rem; // Increased gap between elements
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.8),
    rgba(240, 240, 250, 0.8)
  ); // Subtle gradient background
  height: 100%; // Full height
  border-left: 1px solid rgba(230, 230, 250, 0.5); // Subtle border

  // Styles for Menu component inside drawer
  .navbar {
    flex-direction: column;
    align-items: stretch;
    gap: 15px; // Increased gap between nav items
    order: 1; // Ensure Menu appears first
    margin-top: 10px; // Add some space at the top

    .navButton {
      background-color: transparent;
      color: #333;
      padding: 12px 18px; // More padding for better touch targets
      text-align: left;
      border-radius: 10px; // More rounded corners
      font-size: 1.1rem; // Larger font
      font-weight: 600;
      transition: all 0.2s ease;
      border-left: 3px solid transparent; // Prepare for hover effect

      &:hover {
        background-color: rgba(240, 240, 255, 0.8);
        border-left: 3px solid #0037c0; // Blue accent on hover
        color: #0037c0;
      }
    }
  }

  // Styles for RightSideElements inside drawer - ENHANCED to match desktop
  .rightSideContainer {
    margin-top: 30px; // More space above
    padding-top: 25px; // More padding
    border-top: 1px solid rgba(200, 200, 250, 0.5); // Lighter, more subtle border
    flex-direction: row; // Change to row like desktop
    align-items: center; // Center items vertically
    justify-content: center; // Center horizontally
    gap: 10px; // Match desktop gap
    background-color: transparent; // Transparent background
    border-radius: 100px; // Rounded corners like desktop
    padding: 5px; // Add padding
    width: 90%; // Not full width
    margin-left: auto;
    margin-right: auto;

    .applyButton {
      text-align: center;
      background-color: #fff;
      color: #000;
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 1rem;
      font-weight: 600;
      display: inline-block;
      border: 2px solid rgba(0, 55, 192, 0.3);
      box-shadow: 
        0 0 0 1px rgba(0, 55, 192, 0.4),
        0 0 10px rgba(0, 55, 192, 0.3),
        0 0 20px rgba(0, 55, 192, 0.2);

      &:hover {
        background-color: #fff;
        border-color: rgba(0, 55, 192, 0.5);
        box-shadow: 
          0 0 0 1px rgba(0, 55, 192, 0.5),
          0 0 15px rgba(0, 55, 192, 0.4),
          0 0 30px rgba(0, 55, 192, 0.3);
      }
    }
  }
}

// Media Queries
@media screen and (max-width: 1050px) {
  // Tablet breakpoint
  .header {
    width: 95%;
    top: 10px;
    .fix {
      padding: 5px 10px;
      min-height: 55px;
    }
    // Hide desktop nav links container
    .leftSideContainer > .navbar {
      display: none;
    }
    // Hide desktop right side container
    .rightSideContainer {
      display: none;
    }
  }
  // Hamburger is displayed via Header.tsx logic
}

@media screen and (max-width: 600px) {
  // Mobile breakpoint - UPDATED to match desktop styling
  .header {
    width: 90%; // Match desktop width percentage
    top: 10px; // Position slightly below top like desktop
    margin-top: 20px; // Add top margin
    border-radius: $header-border-radius; // Keep rounded corners like desktop
    background-color: rgba(255, 255, 255, 0.8); // Semi-transparent background like desktop
    backdrop-filter: blur(10px); // Blur effect like desktop
    box-shadow: 
      0 0 15px rgba(0, 55, 192, 0.6),
      0 0 25px rgba(0, 55, 192, 0.5),
      0 0 35px rgba(0, 55, 192, 0.4),
      0 4px 15px rgba(0, 0, 0, 0.05); // Harder, more solid blue glow with less dispersion

    .fix {
      padding: 5px 10px;
      min-height: 50px;
    }
    .leftSideContainer {
      gap: 15px; // Reduce gap on mobile if needed
    }
    .logoWrapper {
      .logo {
        height: 35px;
        margin-right: 10px;
      }
      .textWrapper {
        .mainText,
        .subText {
          font-size: 0.8rem;
        }
      }
    }
  }
  // Drawer styles are defined above
}

// Container for each nav item to position the dropdown
.navItemContainer {
  position: relative; // Needed for absolute positioning of the dropdown
  display: inline-block; // Or flex item if navbar is flex
}

// Style for the anchor tag wrapping the button
.navLink {
  display: inline-block; // Ensures the link takes up space correctly
  text-decoration: none; // Remove default underline
  color: inherit; // Inherit text color
  cursor: pointer; // Use pointer cursor
  border-radius: 20px;
  border: 2px solid rgba(0, 55, 192, 0.3);
  box-shadow: 
    0 0 0 1px rgba(0, 55, 192, 0.4),
    0 0 10px rgba(0, 55, 192, 0.3),
    0 0 20px rgba(0, 55, 192, 0.2);
  transition: 
    border-color 0.3s ease,
    box-shadow 0.3s ease;

  &:hover {
    border-color: rgba(0, 55, 192, 0.5);
    box-shadow: 
      0 0 0 1px rgba(0, 55, 192, 0.5),
      0 0 15px rgba(0, 55, 192, 0.4),
      0 0 30px rgba(0, 55, 192, 0.3);
  }
}

// Style for the dropdown menu itself
.dropdownMenu {
  position: absolute;
  top: 100%; // Position below the button
  left: 0;
  background-color: #fff; // Example background, adjust to your theme
  border: 1px solid #eee; // Example border
  border-radius: 4px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); // Example shadow
  padding: 8px 0; // Padding top/bottom
  min-width: 180px; // Minimum width for the dropdown
  z-index: 1000; // Ensure it appears above other content
  opacity: 1;
  visibility: visible;
  transition:
    opacity 0.2s ease-in-out,
    visibility 0.2s ease-in-out;
  margin-top: 5px; // Small gap between button and dropdown

  // Styles for mobile/tablet where it might open differently
  @media (max-width: 1050px) {
    position: static; // Change position for mobile toggle
    box-shadow: none;
    border: none;
    background-color: rgba(245, 245, 255, 0.5); // Light background
    border-radius: 8px; // Rounded corners
    padding: 5px 0; // Add some padding
    margin-top: 5px; // Add a small top margin for spacing in the drawer
    width: 100%; // Take full width within the drawer/mobile menu
    display: flex; // Use flex for vertical stacking
    flex-direction: column;
    align-items: flex-start; // Align items to the start
  }
}

.backButton {
  display: none;
  
  @media (max-width: 1050px) {
    display: block;
    width: 100%;
    padding: 12px 20px;
    background-color: #0037c0;
    color: #fff;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    font-size: 1rem;
    font-weight: 700;
    font-family: 'Montserrat', sans-serif;
    cursor: pointer;
    text-align: left;
    margin-bottom: 5px;
    border-radius: 8px 8px 0 0;
    
    &:hover {
      background-color: #002c9b;
    }
  }
}

// Style for individual items within the dropdown
.dropdownItem {
  display: block;
  padding: 10px 20px; // Padding for each item
  color: #333; // Example text color
  text-decoration: none;
  white-space: nowrap; // Prevent wrapping
  font-size: 0.9rem; // Adjust font size as needed
  font-family: 'Montserrat'; // Use the Montserrat variable

  &:hover {
    background-color: #f5f5f5; // Example hover background
    color: #000; // Example hover text color
  }

  @media (max-width: 1050px) {
    padding: 12px 15px; // Adjust padding for mobile
    width: 100%; // Ensure items take full width
    color: #444; // Slightly darker text
    font-size: 1rem; // Slightly smaller than main mobile nav items
    border-left: 2px solid transparent; // Prepare for hover effect

    &:hover {
      background-color: rgba(240, 240, 255, 0.8); // Light blue hover
      border-left: 2px solid #0037c0; // Blue accent on hover
      color: #0037c0;
    }
  }
}

// Optional: Style for the dropdown indicator (e.g., chevron)
.dropdownIndicator {
  margin-left: 6px;
  display: inline-block;
  width: 0;
  height: 0;
  vertical-align: middle;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 4px solid currentColor; // Arrow pointing down
  transition: transform 0.2s ease-in-out;

  // Rotate arrow when dropdown is open
  // Target the link which has the aria-expanded attribute
  .navLink[aria-expanded='true'] & {
    transform: rotate(180deg);
  }

  @media (max-width: 1050px) {
    // Optionally hide or change indicator on mobile
    // display: none;
  }
}

// Ensure nav buttons have consistent styling
// This targets the StyledButton component itself
.navButton {
  color: inherit; // Inherit color from header/parent
  background: none;
  border: none;
  cursor: pointer;
  padding: 10px 15px; // Example padding
  font-size: 1rem; // Example font size
  text-transform: uppercase; // Match existing style
  font-weight: 600; // Example weight
  display: inline-flex; // Helps align text and indicator
  align-items: center;
  width: 100%; // Make button fill the link wrapper
  justify-content: space-between; // Push indicator to the right if needed, or center

  &:hover {
    // Define hover state if needed (or handle on .navLink hover)
    opacity: 0.8;
  }
}

// Adjustments for mobile drawer context if needed
.drawerContent {
  .navItemContainer {
    display: block; // Stack items vertically
    width: 100%;
  }
  .navLink {
    display: block; // Make link take full width
    width: 100%;
    border-radius: 20px;
    margin-bottom: 10px;
    border: 2px solid rgba(0, 55, 192, 0.3);
    box-shadow: 
      0 0 0 1px rgba(0, 55, 192, 0.4),
      0 0 10px rgba(0, 55, 192, 0.3),
      0 0 20px rgba(0, 55, 192, 0.2);
    transition: 
      border-color 0.3s ease,
      box-shadow 0.3s ease;

    &:hover {
      border-color: rgba(0, 55, 192, 0.5);
      box-shadow: 
        0 0 0 1px rgba(0, 55, 192, 0.5),
        0 0 15px rgba(0, 55, 192, 0.4),
        0 0 30px rgba(0, 55, 192, 0.3);
    }
  }
  .navButton {
    width: 100%;
    text-align: left;
    padding: 15px; // Drawer padding
    font-size: 1.1rem;
    justify-content: flex-start; // Align text left in drawer
  }
  .dropdownMenu {
    // Styles already adjusted via media query above
    padding-left: 15px; // Indent submenu items in drawer
  }
}
